{"version":3,"sources":["home/home.js","components/service.js","components/ChartNode.js","components/ChartContainer.js","default-chart/default-chart.js","pan-zoom-chart/pan-zoom-chart.js","custom-node-chart/my-node.js","custom-node-chart/custom-node-chart.js","export-chart/export-chart.js","drag-drop-chart/drag-drop-chart.js","edit-chart/edit-chart.js","edit-node/edit-node.js","App.js","serviceWorker.js","index.js"],"names":["Home","className","href","target","width","height","xmlns","stroke","transform","fill","strokeWidth","strokeDasharray","strokeLinejoin","strokeLinecap","x","y","id","fontSize","fontFamily","textAnchor","fontWeight","rx","ry","x1","y1","x2","y2","stroklinejoin","src","alt","subject1","Subject","subject2","dragNodeService","next","draggedNodeId","asObservable","selectNodeService","selectedNodeId","ChartNode","datasource","NodeTemplate","draggable","collapsible","multipleSelect","changeHierarchy","onClickNode","toggleableSiblings","isUser","node","useRef","useState","topEdgeExpanded","setTopEdgeExpanded","rightEdgeExpanded","setRightEdgeExpanded","bottomEdgeExpanded","setBottomEdgeExpanded","leftEdgeExpanded","setLeftEdgeExpanded","allowedDrop","setAllowedDrop","selected","setSelected","nodeClass","filter","item","join","useEffect","subs1","subscribe","draggedInfo","document","querySelector","closest","current","subs2","selectedNodeInfo","unsubscribe","toggleAncestors","actionNode","parentNode","firstChild","classList","contains","remove","toggleSiblings","isSiblingsCollapsed","Array","from","children","some","add","split","setTimeout","previousSibling","toggle","nextSibling","hEdgeClickHandler","e","stopPropagation","ref","undefined","onClick","event","onDragStart","copyDS","relationship","dataTransfer","setData","JSON","stringify","onDragOver","preventDefault","onDragEnd","onDrop","currentTarget","parse","getData","onMouseEnter","parent","isAncestorsCollapsed","isChildrenCollapsed","onMouseLeave","nodeData","charAt","name","title","toggleChildren","length","map","key","defaultProps","pan","minZoom","maxZoom","defaultZoom","containerClass","chartClass","loading","loadingComponent","ChartContainer","forwardRef","onClickChart","container","chart","panning","setPanning","cursor","setCursor","exporting","setExporting","left","top","pos","setPos","zoom","setZoom","ds","setDS","attachRel","data","flags","forEach","setTransform","z","style","dsDigger","JSONDigger","draggedItemData","dropTargetId","a","removeNode","addChildren","base64SvgToBase64Png","originalBase64","filename","Promise","resolve","img","createElement","onload","body","appendChild","canvas","removeChild","ctx","getContext","fillStyle","fillRect","drawImage","toDataURL","uri","link","download","click","window","open","saveAs","chartToImage","exportFilename","originalScrollLeft","originalScrollTop","domtoimage","toSvg","scrollWidth","scrollHeight","imagePlaceholder","then","aspectRatio","Math","min","scrollLeft","scrollTop","catch","chartToPdf","exportfilename","driver","chartToPdfUsingJsPdf","chartToPdfUsingDomToPdf","domtopdf","html2canvas","clientWidth","clientHeight","onclone","clonedDoc","background","canvasWidth","floor","canvasHeight","doc","jsPDF","orientation","unit","format","addImage","save","useImperativeHandle","resetZoom","zoomIn","amount","newZoom","zoomOut","exportTo","fileType","options","pdfDriver","expandAllNodes","querySelectorAll","el","onMouseUp","onMouseDown","clientX","clientY","onMouseMove","dx","dy","DefaultChart","PanZoomChart","MyNode","alert","CustomNodeChart","ExportChart","orgchart","setFilename","fileextension","setFileextension","onExtensionChange","value","htmlFor","type","onChange","marginRight","checked","marginLeft","DragDropChart","EditChart","Set","selectedNodes","setSelectedNodes","newNodes","setNewNodes","isEditMode","setIsEditMode","isMultipleSelect","setIsMultipleSelect","addNewNode","prevNewNodes","getNewNodes","nodes","push","uuidv4","addChildNodes","addSiblingNodes","addSiblings","removeNodes","display","index","placeholder","onNameChange","onTitleChange","disabled","splice","removeNewNode","addRoot","prev","EditNode","newNodeName","setNewNodeName","newNodeTitle","setNewNodeTitle","updateNodes","App","to","exact","activeClassName","path","component","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ee6279ce.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./home.css\";\n\nconst Home = () => {\n  return (\n    <div className=\"home-wrapper\">\n      <a\n        href=\"https://github.com/dabeng/react-orgchart\"\n        target=\"blank\"\n        className=\"repo-logo\"\n      >\n        <svg width=\"860\" height=\"240\" xmlns=\"http://www.w3.org/2000/svg\">\n          <g>\n            <title>Logo of Dabeng&#x27;s js studio</title>\n            <text\n              stroke=\"#b80036\"\n              transform=\"matrix(1.2821781635284424,0,0,1.313725471496582,-94.81186294555664,-18.196077346801758) \"\n              fill=\"#b80036\"\n              strokeWidth=\"3\"\n              strokeDasharray=\"null\"\n              strokeLinejoin=\"null\"\n              strokeLinecap=\"null\"\n              x=\"524.741312\"\n              y=\"134.910448\"\n              id=\"svg_4\"\n              fontSize=\"92\"\n              fontFamily=\"Sans-serif\"\n              textAnchor=\"middle\"\n              fontWeight=\"bold\"\n            >\n              OrgChart\n            </text>\n            <g id=\"svg_5\" stroke=\"null\">\n              <rect\n                id=\"svg_1\"\n                height=\"43.609757\"\n                width=\"128.702291\"\n                y=\"45\"\n                x=\"95.791349\"\n                strokeLinecap=\"null\"\n                strokeLinejoin=\"null\"\n                strokeDasharray=\"null\"\n                strokeWidth=\"7\"\n                fill=\"none\"\n                rx=\"5\"\n                ry=\"5\"\n                stroke=\"#b80036\"\n              />\n              <rect\n                height=\"43.609757\"\n                width=\"128.702291\"\n                y=\"150.390247\"\n                x=\"172.297711\"\n                strokeLinecap=\"null\"\n                strokeLinejoin=\"null\"\n                strokeDasharray=\"null\"\n                strokeWidth=\"7\"\n                fill=\"none\"\n                id=\"svg_2\"\n                rx=\"5\"\n                ry=\"5\"\n                stroke=\"#b80036\"\n              />\n              <rect\n                height=\"43.609757\"\n                width=\"128.702291\"\n                y=\"150.390247\"\n                x=\"20\"\n                strokeLinecap=\"null\"\n                strokeLinejoin=\"null\"\n                strokeDasharray=\"null\"\n                strokeWidth=\"7\"\n                fill=\"none\"\n                id=\"svg_3\"\n                rx=\"5\"\n                ry=\"5\"\n                stroke=\"#b80036\"\n              />\n              <line\n                fill=\"none\"\n                strokeWidth=\"3\"\n                strokeDasharray=\"null\"\n                strokeLinejoin=\"null\"\n                strokeLinecap=\"null\"\n                x1=\"83.636139\"\n                y1=\"120.590246\"\n                x2=\"236.648851\"\n                y2=\"120.590246\"\n                id=\"svg_8\"\n                stroke=\"#b80036\"\n              />\n              <line\n                fill=\"none\"\n                strokeWidth=\"3\"\n                strokeDasharray=\"null\"\n                stroklinejoin=\"null\"\n                strokeLinecap=\"null\"\n                x1=\"84.351146\"\n                y1=\"119.86342\"\n                x2=\"84.351146\"\n                y2=\"148.209759\"\n                id=\"svg_10\"\n                stroke=\"#b80036\"\n              />\n              <line\n                fill=\"none\"\n                strokeWidth=\"3\"\n                strokeDasharray=\"null\"\n                strokeLinejoin=\"null\"\n                strokeLinecap=\"null\"\n                x1=\"235.933844\"\n                y1=\"119.863418\"\n                x2=\"235.933844\"\n                y2=\"148.209759\"\n                id=\"svg_11\"\n                stroke=\"#b80036\"\n              />\n              <line\n                fill=\"none\"\n                strokeWidth=\"3\"\n                strokeDasharray=\"null\"\n                strokeLinejoin=\"null\"\n                strokeLinecap=\"null\"\n                x1=\"160.142495\"\n                y1=\"90.790247\"\n                x2=\"160.142495\"\n                y2=\"119.863416\"\n                id=\"svg_12\"\n                stroke=\"#b80036\"\n              />\n            </g>\n          </g>\n        </svg>\n      </a>\n      <a href=\"https://github.com/dabeng\" target=\"blank\" className=\"author-logo\">\n        <img src=\"https://rawgit.com/dabeng/OrgChart/master/demo/img/logo.png\" alt=\"logo\" />\n      </a>\n    </div>\n  );\n};\n\nexport default Home;\n","import { Subject } from \"rxjs\";\n\nconst subject1 = new Subject();\nconst subject2 = new Subject();\n\nexport const dragNodeService = {\n  sendDragInfo: id => subject1.next({ draggedNodeId: id }),\n  clearDragInfo: () => subject1.next(),\n  getDragInfo: () => subject1.asObservable()\n};\n\nexport const selectNodeService = {\n  sendSelectedNodeInfo: id => subject2.next({ selectedNodeId: id }),\n  clearSelectedNodeInfo: () => subject2.next(),\n  getSelectedNodeInfo: () => subject2.asObservable()\n};\n","import React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { dragNodeService, selectNodeService } from './service';\nimport './ChartNode.css';\n\nconst propTypes = {\n  datasource: PropTypes.object,\n  NodeTemplate: PropTypes.elementType,\n  draggable: PropTypes.bool,\n  collapsible: PropTypes.bool,\n  multipleSelect: PropTypes.bool,\n  changeHierarchy: PropTypes.func,\n  onClickNode: PropTypes.func,\n  toggleableSiblings: PropTypes.bool,\n  isUser: PropTypes.bool,\n};\n\nconst defaultProps = {\n  draggable: false,\n  collapsible: true,\n  multipleSelect: false,\n  toggleableSiblings: false,\n  isUser: false,\n};\n\nconst ChartNode = ({\n  datasource,\n  NodeTemplate,\n  draggable,\n  collapsible,\n  multipleSelect,\n  changeHierarchy,\n  onClickNode,\n  toggleableSiblings,\n  isUser,\n}) => {\n  const node = useRef();\n\n  const [topEdgeExpanded, setTopEdgeExpanded] = useState();\n  const [rightEdgeExpanded, setRightEdgeExpanded] = useState();\n  const [bottomEdgeExpanded, setBottomEdgeExpanded] = useState();\n  const [leftEdgeExpanded, setLeftEdgeExpanded] = useState();\n  const [allowedDrop, setAllowedDrop] = useState(false);\n  const [selected, setSelected] = useState(false);\n\n  const nodeClass = [\n    'oc-node',\n    isUser ? 'isUser' : '',\n    allowedDrop ? 'allowedDrop' : '',\n    selected ? 'selected' : '',\n  ]\n    .filter((item) => item)\n    .join(' ');\n\n  useEffect(() => {\n    const subs1 = dragNodeService.getDragInfo().subscribe((draggedInfo) => {\n      if (draggedInfo) {\n        setAllowedDrop(\n          !document\n            .querySelector('#' + draggedInfo.draggedNodeId)\n            .closest('li')\n            .querySelector('#' + node.current.id)\n            ? true\n            : false\n        );\n      } else {\n        setAllowedDrop(false);\n      }\n    });\n\n    const subs2 = selectNodeService\n      .getSelectedNodeInfo()\n      .subscribe((selectedNodeInfo) => {\n        if (selectedNodeInfo) {\n          if (multipleSelect) {\n            if (selectedNodeInfo.selectedNodeId === datasource.id) {\n              setSelected(true);\n            }\n          } else {\n            setSelected(selectedNodeInfo.selectedNodeId === datasource.id);\n          }\n        } else {\n          setSelected(false);\n        }\n      });\n\n    return () => {\n      subs1.unsubscribe();\n      subs2.unsubscribe();\n    };\n  }, [multipleSelect, datasource]);\n\n  const addArrows = (e) => {\n    const node = e.target.closest('li');\n    const parent = node.parentNode.closest('li');\n    const isAncestorsCollapsed =\n      node && parent\n        ? parent.firstChild.classList.contains('hidden')\n        : undefined;\n    const isSiblingsCollapsed = Array.from(\n      node.parentNode.children\n    ).some((item) => item.classList.contains('hidden'));\n\n    const children = node.children[1];\n    let isChildrenCollapsed = false;\n    if (children) isChildrenCollapsed = children.classList.contains('hidden');\n\n    setTopEdgeExpanded(!isAncestorsCollapsed);\n    setRightEdgeExpanded(!isSiblingsCollapsed);\n    setLeftEdgeExpanded(!isSiblingsCollapsed);\n    setBottomEdgeExpanded(!isChildrenCollapsed);\n  };\n\n  const removeArrows = () => {\n    setTopEdgeExpanded(undefined);\n    setRightEdgeExpanded(undefined);\n    setBottomEdgeExpanded(undefined);\n    setLeftEdgeExpanded(undefined);\n  };\n\n  const toggleAncestors = (actionNode) => {\n    let node = actionNode.parentNode.closest('li');\n    if (!node) return;\n    const isAncestorsCollapsed = node.firstChild.classList.contains('hidden');\n    if (isAncestorsCollapsed) {\n      // 向上展开，只展开一级\n      actionNode.classList.remove('isAncestorsCollapsed');\n      node.firstChild.classList.remove('hidden');\n      node.firstChild.classList.remove('zero-opacity');\n      toggleSiblings(actionNode);\n    } else {\n      // 向下折叠，则折叠所有祖先节点以及祖先节点的兄弟节点\n      const isSiblingsCollapsed = Array.from(\n        actionNode.parentNode.children\n      ).some((item) => item.classList.contains('hidden'));\n      if (!isSiblingsCollapsed) {\n        toggleSiblings(actionNode);\n      }\n      actionNode.classList.add(\n        ...(\n          'isAncestorsCollapsed' +\n          (isSiblingsCollapsed ? '' : ' isSiblingsCollapsed')\n        ).split(' ')\n      );\n      node.firstChild.classList.add('zero-opacity');\n      setTimeout(function () {\n        node.firstChild.classList.add('hidden');\n      }, 300);\n      // 如果还有展开的祖先节点，那继续折叠关闭之\n      if (\n        node.parentNode.closest('li') &&\n        !node.parentNode.closest('li').firstChild.classList.contains('hidden')\n      ) {\n        toggleAncestors(node);\n      }\n    }\n  };\n\n  const topEdgeClickHandler = (e) => {\n    e.stopPropagation();\n    setTopEdgeExpanded(!topEdgeExpanded);\n    toggleAncestors(e.target.closest('li'));\n  };\n\n  const toggleChildren = (actionNode) => {\n    const node = actionNode.target.closest('li');\n    const children = node.children[1];\n    let isChildrenCollapsed = false;\n\n    if (children) isChildrenCollapsed = children.classList.contains('hidden');\n\n    if (isChildrenCollapsed) {\n      children.classList.remove('hidden');\n      children.classList.remove('zero-opacity');\n    } else {\n      children.classList.add('zero-opacity');\n      setTimeout(function () {\n        children.classList.add('hidden');\n      }, 300);\n    }\n  };\n\n  const bottomEdgeClickHandler = (e) => {\n    e.stopPropagation();\n    toggleChildren(e);\n    setBottomEdgeExpanded(!bottomEdgeExpanded);\n  };\n\n  const toggleSiblings = (actionNode) => {\n    let node = actionNode.previousSibling;\n    const isSiblingsCollapsed = Array.from(\n      actionNode.parentNode.children\n    ).some((item) => item.classList.contains('hidden'));\n    actionNode.classList.toggle('isSiblingsCollapsed', !isSiblingsCollapsed);\n    // 先处理同级的兄弟节点\n    while (node) {\n      if (isSiblingsCollapsed) {\n        node.classList.remove('hidden');\n        node.classList.remove('zero-opacity');\n      } else {\n        node.classList.add('zero-opacity');\n        setTimeout(function () {\n          node.classList.add('hidden');\n        }, 300);\n      }\n      node = node.previousSibling;\n    }\n    node = actionNode.nextSibling;\n    while (node) {\n      if (isSiblingsCollapsed) {\n        node.classList.remove('hidden');\n        node.classList.remove('zero-opacity');\n      } else {\n        node.classList.add('zero-opacity');\n        setTimeout(function () {\n          node.classList.add('hidden');\n        }, 300);\n      }\n      node = node.nextSibling;\n    }\n    // 在展开兄弟节点的同时，还要展开父节点\n    const isAncestorsCollapsed = actionNode.parentNode\n      .closest('li')\n      .firstChild.classList.contains('hidden');\n    if (isAncestorsCollapsed) {\n      toggleAncestors(actionNode);\n    }\n  };\n\n  const hEdgeClickHandler = (e) => {\n    e.stopPropagation();\n    setLeftEdgeExpanded(!leftEdgeExpanded);\n    setRightEdgeExpanded(!rightEdgeExpanded);\n    if (toggleableSiblings) toggleSiblings(e.target.closest('li'));\n  };\n\n  const filterAllowedDropNodes = (id) => {\n    dragNodeService.sendDragInfo(id);\n  };\n\n  const clickNodeHandler = (event) => {\n    if (onClickNode) {\n      onClickNode(datasource);\n    }\n\n    selectNodeService.sendSelectedNodeInfo(datasource.id);\n  };\n\n  const dragstartHandler = (event) => {\n    const copyDS = { ...datasource };\n    delete copyDS.relationship;\n    event.dataTransfer.setData('text/plain', JSON.stringify(copyDS));\n    // highlight all potential drop targets\n    filterAllowedDropNodes(node.current.id);\n  };\n\n  const dragoverHandler = (event) => {\n    // prevent default to allow drop\n    event.preventDefault();\n  };\n\n  const dragendHandler = () => {\n    // reset background of all potential drop targets\n    dragNodeService.clearDragInfo();\n  };\n\n  const dropHandler = (event) => {\n    if (!event.currentTarget.classList.contains('allowedDrop')) {\n      return;\n    }\n    dragNodeService.clearDragInfo();\n    changeHierarchy(\n      JSON.parse(event.dataTransfer.getData('text/plain')),\n      event.currentTarget.id\n    );\n  };\n\n  return (\n    <li className=\"oc-hierarchy\">\n      <div\n        ref={node}\n        id={datasource.id}\n        className={nodeClass}\n        draggable={draggable ? 'true' : undefined}\n        onClick={clickNodeHandler}\n        onDragStart={dragstartHandler}\n        onDragOver={dragoverHandler}\n        onDragEnd={dragendHandler}\n        onDrop={dropHandler}\n        onMouseEnter={addArrows}\n        onMouseLeave={removeArrows}\n      >\n        {NodeTemplate ? (\n          <NodeTemplate nodeData={datasource} />\n        ) : (\n          <>\n            <div className=\"oc-heading\">\n              {datasource.relationship &&\n                datasource.relationship.charAt(2) === '1' && (\n                  <i className=\"oci oci-leader oc-symbol\" />\n                )}\n              {datasource.name}\n            </div>\n            <div className=\"oc-content\">{datasource.title}</div>\n          </>\n        )}\n        {collapsible &&\n          datasource.relationship &&\n          datasource.relationship.charAt(0) === '1' && (\n            <i\n              className={`oc-edge verticalEdge topEdge oci ${\n                topEdgeExpanded === undefined\n                  ? ''\n                  : topEdgeExpanded\n                  ? 'oci-chevron-down'\n                  : 'oci-chevron-up'\n              }`}\n              onClick={topEdgeClickHandler}\n            />\n          )}\n        {collapsible &&\n          datasource.relationship &&\n          datasource.relationship.charAt(1) === '1' && (\n            <>\n              <i\n                className={`oc-edge horizontalEdge rightEdge oci ${\n                  rightEdgeExpanded === undefined\n                    ? ''\n                    : rightEdgeExpanded\n                    ? 'oci-chevron-left'\n                    : 'oci-chevron-right'\n                } ${toggleableSiblings ? '' : 'hidden'}`}\n                onClick={hEdgeClickHandler}\n              />\n              <i\n                className={`oc-edge horizontalEdge leftEdge oci ${\n                  leftEdgeExpanded === undefined\n                    ? ''\n                    : leftEdgeExpanded\n                    ? 'oci-chevron-right'\n                    : 'oci-chevron-left'\n                } ${toggleableSiblings ? '' : 'hidden'}`}\n                onClick={hEdgeClickHandler}\n              />\n            </>\n          )}\n        {collapsible &&\n          datasource.relationship &&\n          datasource.relationship.charAt(2) === '1' && (\n            <i\n              className={`oc-edge verticalEdge bottomEdge oci ${\n                bottomEdgeExpanded === undefined\n                  ? ''\n                  : bottomEdgeExpanded\n                  ? 'oci-chevron-up'\n                  : 'oci-chevron-down'\n              }`}\n              onClick={bottomEdgeClickHandler}\n            />\n          )}\n      </div>\n      {datasource.children && datasource.children.length > 0 && (\n        <ul className=\"oc-children\">\n          {datasource.children.map((node) => (\n            <ChartNode\n              datasource={node}\n              isUser={node.isUser}\n              NodeTemplate={NodeTemplate}\n              id={node.id}\n              key={node.id}\n              draggable={draggable}\n              collapsible={collapsible}\n              multipleSelect={multipleSelect}\n              changeHierarchy={changeHierarchy}\n              onClickNode={onClickNode}\n              toggleableSiblings={toggleableSiblings}\n            />\n          ))}\n        </ul>\n      )}\n    </li>\n  );\n};\n\nChartNode.propTypes = propTypes;\nChartNode.defaultProps = defaultProps;\n\nexport default ChartNode;\n","import React, {\n  useState,\n  useEffect,\n  useRef,\n  forwardRef,\n  useImperativeHandle,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { selectNodeService } from './service';\nimport JSONDigger from 'json-digger';\nimport html2canvas from \"html2canvas\";\nimport domtoimage from 'dom-to-image';\nimport domtopdf from 'dom-to-pdf';\nimport jsPDF from \"jspdf\";\nimport ChartNode from './ChartNode';\nimport './ChartContainer.css';\n\nconst propTypes = {\n  datasource: PropTypes.object.isRequired,\n  pan: PropTypes.bool,\n  minZoom: PropTypes.number,\n  maxZoom: PropTypes.number,\n  defaultZoom: PropTypes.number,\n  containerClass: PropTypes.string,\n  chartClass: PropTypes.string,\n  NodeTemplate: PropTypes.elementType,\n  draggable: PropTypes.bool,\n  collapsible: PropTypes.bool,\n  multipleSelect: PropTypes.bool,\n  onClickNode: PropTypes.func,\n  onClickChart: PropTypes.func,\n  toggleableSiblings: PropTypes.bool,\n  loading: PropTypes.bool,\n  loadingComponent: PropTypes.element,\n};\n\nconst defaultProps = {\n  pan: false,\n  minZoom: 0.1,\n  maxZoom: 3,\n  defaultZoom: 0.5,\n  containerClass: '',\n  chartClass: '',\n  draggable: false,\n  collapsible: true,\n  multipleSelect: false,\n  toggleableSiblings: true,\n  loading: false,\n  loadingComponent: <i className=\"oci oci-spinner\"></i>,\n};\n\nconst ChartContainer = forwardRef(\n  (\n    {\n      datasource,\n      pan,\n      minZoom,\n      maxZoom,\n      defaultZoom,\n      containerClass,\n      chartClass,\n      NodeTemplate,\n      draggable,\n      collapsible,\n      multipleSelect,\n      onClickNode,\n      onClickChart,\n      toggleableSiblings,\n      loading,\n      loadingComponent,\n    },\n    ref\n  ) => {\n    const container = useRef();\n    const chart = useRef();\n\n    const [panning, setPanning] = useState(false);\n    const [cursor, setCursor] = useState('default');\n    const [exporting, setExporting] = useState(false);\n    const [pos, setPos] = useState({\n      left: 0,\n      top: 0,\n      x: 0,\n      y: 0,\n    });\n    const [zoom, setZoom] = useState(1);\n    const [ds, setDS] = useState(datasource);\n\n    const attachRel = (data, flags) => {\n      data.relationship =\n        flags + (data.children && data.children.length > 0 ? 1 : 0);\n      if (data.children) {\n        data.children.forEach(function (item) {\n          attachRel(item, '1' + (data.children.length > 1 ? 1 : 0));\n        });\n      }\n      return data;\n    };\n\n    const setTransform = (z) => {\n      setZoom(z);\n      return `scale(${z})`;\n    };\n\n    useEffect(() => {\n      chart.current.style.transform = setTransform(defaultZoom);\n    }, [defaultZoom]);\n\n    useEffect(() => {\n      setDS(datasource);\n    }, [datasource]);\n\n    const dsDigger = new JSONDigger(datasource, 'id', 'children');\n\n    const clickChartHandler = (event) => {\n      if (!event.target.closest('.oc-node')) {\n        if (onClickChart) {\n          onClickChart();\n        }\n        selectNodeService.clearSelectedNodeInfo();\n      }\n    };\n\n    const panEndHandler = () => {\n      setPanning(false);\n      setCursor('default');\n    };\n\n    const panHandler = (e) => {\n      const dx = e.clientX - pos.x;\n      const dy = e.clientY - pos.y;\n\n      container.current.scrollTop = pos.top - dy;\n      container.current.scrollLeft = pos.left - dx;\n    };\n\n    const panStartHandler = (e) => {\n      setPos({\n        left: container.current.scrollLeft,\n        top: container.current.scrollTop,\n        x: e.clientX,\n        y: e.clientY,\n      });\n      setPanning(true);\n      setCursor('grab');\n    };\n\n    const changeHierarchy = async (draggedItemData, dropTargetId) => {\n      await dsDigger.removeNode(draggedItemData.id);\n      await dsDigger.addChildren(dropTargetId, draggedItemData);\n      setDS({ ...dsDigger.ds });\n    };\n\n    function saveAs(uri, filename) {\n      var link = document.createElement('a');\n      if (typeof link.download === 'string') {\n        link.href = uri;\n        link.download = filename;\n\n        //Firefox requires the link to be in the body\n        document.body.appendChild(link);\n\n        //simulate click\n        link.click();\n\n        //remove the link when done\n        document.body.removeChild(link);\n      } else {\n        window.open(uri);\n      }\n    }\n\n    function base64SvgToBase64Png(originalBase64, width, height, filename) {\n      return new Promise((resolve) => {\n        let img = document.createElement('img');\n        img.onload = function () {\n          document.body.appendChild(img);\n          let canvas = document.createElement('canvas');\n          document.body.removeChild(img);\n          canvas.width = width;\n          canvas.height = height;\n          let ctx = canvas.getContext('2d');\n          ctx.fillStyle = '#FFFFFF';\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\n          ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n          try {\n            let data = canvas.toDataURL('image/jpeg');\n            saveAs(data, filename + '.jpeg');\n            resolve(data);\n          } catch (e) {\n            resolve(null);\n          }\n        };\n        img.src = originalBase64;\n      });\n    }\n\n    const chartToImage = (\n      exportFilename,\n      originalScrollLeft,\n      originalScrollTop,\n    ) => {\n      domtoimage\n        .toSvg(chart.current, {\n          width: chart.current.scrollWidth,\n          height: chart.current.scrollHeight,\n          style: { transform: '' },\n          imagePlaceholder:\n            'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY7h79y4ABTICmGnXPbMAAAAASUVORK5CYII=',\n        })\n        .then((canvas) => {\n          let width, height;\n          const aspectRatio =\n            chart.current.scrollWidth / chart.current.scrollHeight;\n\n          if (aspectRatio > 1) {\n            width = Math.min(chart.current.scrollWidth, 16384);\n            height = width / aspectRatio;\n          } else {\n            height = Math.min(chart.current.scrollHeight, 16384);\n            width = height * aspectRatio;\n          }\n\n          base64SvgToBase64Png(canvas, width, height, exportFilename).then(\n            () => {\n              chart.current.style.transform = setTransform(zoom);\n              setExporting(false);\n              container.current.scrollLeft = originalScrollLeft;\n              container.current.scrollTop = originalScrollTop;\n            }\n          );\n        })\n        .catch((e) => {\n          setExporting(false);\n        });\n    };\n\n    const chartToPdf = (exportfilename, driver) => {\n      if (driver === 'dom-to-pdf') {\n        chartToPdfUsingDomToPdf(exportfilename);\n        return;\n      } else if (driver === 'jspdf') {\n        chartToPdfUsingJsPdf(exportfilename)\n      }\n    }\n\n    const chartToPdfUsingDomToPdf = (exportFilename) => {\n      setExporting(true);\n      domtopdf(chart.current, { filename: exportFilename }, () => {\n        setExporting(false)\n      });\n      \n    }\n\n    const chartToPdfUsingJsPdf = (exportFilename) => {\n      setExporting(true);\n\n      const originalScrollLeft = container.current.scrollLeft;\n      container.current.scrollLeft = 0;\n      const originalScrollTop = container.current.scrollTop;\n      container.current.scrollTop = 0;\n\n      html2canvas(chart.current, {\n        width: chart.current.clientWidth,\n        height: chart.current.clientHeight,\n        onclone: function(clonedDoc) {\n          clonedDoc.querySelector(\".orgchart\").style.background = \"none\";\n          clonedDoc.querySelector(\".orgchart\").style.transform = \"\";\n        }\n      }).then(\n        canvas => {\n          const canvasWidth = Math.floor(canvas.width);\n          const canvasHeight = Math.floor(canvas.height);\n          const doc =\n            canvasWidth > canvasHeight\n              ? new jsPDF({\n                  orientation: \"landscape\",\n                  unit: \"px\",\n                  format: [canvasWidth, canvasHeight]\n                })\n              : new jsPDF({\n                  orientation: \"portrait\",\n                  unit: \"px\",\n                  format: [canvasHeight, canvasWidth]\n                });\n          doc.addImage(canvas.toDataURL(\"image/jpeg\", 1.0), \"JPEG\", 0, 0);\n          doc.save(exportFilename + \".pdf\");\n\n          setExporting(false);\n          container.current.scrollLeft = originalScrollLeft;\n          container.current.scrollTop = originalScrollTop;\n        },\n        () => {\n          setExporting(false);\n          container.current.scrollLeft = originalScrollLeft;\n          container.current.scrollTop = originalScrollTop;\n        }\n      );\n    };\n\n    useImperativeHandle(ref, () => ({\n      setExporting: (exporting) => setExporting(exporting),\n      resetZoom: () => {\n        chart.current.style.transform = setTransform(defaultZoom);\n      },\n      zoomIn: (amount = 0.05) => {\n        const newZoom = zoom + amount;\n        if (newZoom <= maxZoom) {\n          chart.current.style.transform = setTransform(newZoom);\n        }\n      },\n      zoomOut: (amount = 0.05) => {\n        const newZoom = zoom - amount;\n        if (newZoom > 0 && newZoom > minZoom) {\n          chart.current.style.transform = setTransform(newZoom);\n        }\n      },\n      exportTo: (exportFilename, fileType = 'image/jpeg', options = {}) => {\n        exportFilename = exportFilename || 'OrgChart';\n        setExporting(true);\n        const originalScrollLeft = container.current.scrollLeft;\n        container.current.scrollLeft = 0;\n        const originalScrollTop = container.current.scrollTop;\n        container.current.scrollTop = 0;\n        if (fileType === 'application/pdf') {\n          setTimeout(function () {\n            chartToPdf(exportFilename, (options || {}).pdfDriver || 'dom-to-pdf');\n          }, 300);\n        } else {\n          setTimeout(function () {\n            chartToImage(exportFilename, originalScrollLeft, originalScrollTop);\n          }, 300);\n        }\n      },\n      expandAllNodes: () => {\n        chart.current\n          .querySelectorAll(\n            '.oc-node.hidden, .oc-node-full-opacity, .oc-node.zero-opacity, .oc-hierarchy.hidden, .oc-hierarchy.full-opacity, .oc-hierarchy.zero-opacity, .isSiblingsCollapsed, .isAncestorsCollapsed, .oc-children.hidden, .oc-children-full-opacity, .oc-children-zero-opacity'\n          )\n          .forEach((el) => {\n            el.classList.remove(\n              'hidden',\n              'full-opacity',\n              'zero-opacity',\n              'isSiblingsCollapsed',\n              'isAncestorsCollapsed'\n            );\n          });\n      },\n    }));\n\n    return (\n      <div\n        ref={container}\n        className={`orgchart-container ${\n          exporting || loading ? 'exporting-chart-container ' : ''\n        } ${containerClass}`}\n        style={{\n          cursor: cursor,\n        }}\n        onMouseUp={pan && panning ? panEndHandler : undefined}\n        onMouseDown={pan ? panStartHandler : undefined}\n        onMouseMove={pan && panning ? panHandler : undefined}\n      >\n        <div\n          ref={chart}\n          className={`orgchart ${\n            exporting || loading ? 'exporting-chart ' : ''\n          } ${chartClass}`}\n          onClick={clickChartHandler}\n        >\n          <ul>\n            <ChartNode\n              datasource={attachRel(ds, '00')}\n              NodeTemplate={NodeTemplate}\n              draggable={draggable}\n              collapsible={collapsible}\n              multipleSelect={multipleSelect}\n              changeHierarchy={changeHierarchy}\n              onClickNode={onClickNode}\n              toggleableSiblings={toggleableSiblings}\n              isUser={attachRel(ds, '00').isUser}\n            />\n          </ul>\n        </div>\n        <div className={`oc-mask ${exporting || loading ? '' : 'hidden'}`}>\n          <div className=\"spinner\">{loadingComponent}</div>\n        </div>\n      </div>\n    );\n  }\n);\n\nChartContainer.propTypes = propTypes;\nChartContainer.defaultProps = defaultProps;\n\nexport default ChartContainer;\n","import React from \"react\";\nimport OrganizationChart from \"../components/ChartContainer\";\n\nconst DefaultChart = () => {\n  const ds = {\n    id: \"n1\",\n    name: \"Lao Lao\",\n    title: \"general manager\",\n    children: [\n      { id: \"n2\", name: \"Bo Miao\", title: \"department manager\" },\n      {\n        id: \"n3\",\n        name: \"Su Miao\",\n        title: \"department manager\",\n        children: [\n          { id: \"n4\", name: \"Tie Hua\", title: \"senior engineer\" },\n          {\n            id: \"n5\",\n            name: \"Hei Hei\",\n            title: \"senior engineer\",\n            children: [\n              { id: \"n6\", name: \"Dan Dan\", title: \"engineer\" },\n              { id: \"n7\", name: \"Xiang Xiang\", title: \"engineer\" }\n            ]\n          },\n          { id: \"n8\", name: \"Pang Pang\", title: \"senior engineer\" }\n        ]\n      },\n      { id: \"n9\", name: \"Hong Miao\", title: \"department manager\" },\n      {\n        id: \"n10\",\n        name: \"Chun Miao\",\n        title: \"department manager\",\n        children: [{ id: \"n11\", name: \"Yue Yue\", title: \"senior engineer\" }]\n      }\n    ]\n  };\n\n  return <OrganizationChart datasource={ds} />;\n};\n\nexport default DefaultChart;\n","import React from \"react\";\nimport OrganizationChart from \"../components/ChartContainer\";\n\nconst PanZoomChart = () => {\n  const ds = {\n    id: \"n1\",\n    name: \"Lao Lao\",\n    title: \"general manager\",\n    children: [\n      { id: \"n2\", name: \"Bo Miao\", title: \"department manager\" },\n      {\n        id: \"n3\",\n        name: \"Su Miao\",\n        title: \"department manager\",\n        children: [\n          { id: \"n4\", name: \"Tie Hua\", title: \"senior engineer\" },\n          {\n            id: \"n5\",\n            name: \"Hei Hei\",\n            title: \"senior engineer\",\n            children: [\n              { id: \"n6\", name: \"Dan Dan\", title: \"engineer\" },\n              { id: \"n7\", name: \"Xiang Xiang\", title: \"engineer\" }\n            ]\n          },\n          { id: \"n8\", name: \"Pang Pang\", title: \"senior engineer\" }\n        ]\n      },\n      { id: \"n9\", name: \"Hong Miao\", title: \"department manager\" },\n      {\n        id: \"n10\",\n        name: \"Chun Miao\",\n        title: \"department manager\",\n        children: [{ id: \"n11\", name: \"Yue Yue\", title: \"senior engineer\" }]\n      }\n    ]\n  };\n\n  return <OrganizationChart datasource={ds} pan={true} zoom={true} />;\n};\n\nexport default PanZoomChart;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport \"./my-node.css\";\n\nconst propTypes = {\n  nodeData: PropTypes.object.isRequired\n};\n\nconst MyNode = ({ nodeData }) => {\n  const selectNode = () => {\n    alert(\"Hi All. I'm \" + nodeData.name + \". I'm a \" + nodeData.title + \".\");\n  };\n\n  return (\n    <div onClick={selectNode}>\n      <div className=\"position\">{nodeData.title}</div>\n      <div className=\"fullname\">{nodeData.name}</div>\n    </div>\n  );\n};\n\nMyNode.propTypes = propTypes;\n\nexport default MyNode;\n","import React from \"react\";\nimport OrganizationChart from \"../components/ChartContainer\";\nimport MyNode from \"./my-node\";\n\nconst CustomNodeChart = () => {\n  const ds = {\n    id: \"n1\",\n    name: \"Lao Lao\",\n    title: \"general manager\",\n    children: [\n      { id: \"n2\", name: \"Bo Miao\", title: \"department manager\" },\n      {\n        id: \"n3\",\n        name: \"Su Miao\",\n        title: \"department manager\",\n        children: [\n          { id: \"n4\", name: \"Tie Hua\", title: \"senior engineer\" },\n          {\n            id: \"n5\",\n            name: \"Hei Hei\",\n            title: \"senior engineer\",\n            children: [\n              { id: \"n6\", name: \"Dan Dan\", title: \"engineer\" },\n              { id: \"n7\", name: \"Xiang Xiang\", title: \"engineer\" }\n            ]\n          },\n          { id: \"n8\", name: \"Pang Pang\", title: \"senior engineer\" }\n        ]\n      },\n      { id: \"n9\", name: \"Hong Miao\", title: \"department manager\" },\n      {\n        id: \"n10\",\n        name: \"Chun Miao\",\n        title: \"department manager\",\n        children: [{ id: \"n11\", name: \"Yue Yue\", title: \"senior engineer\" }]\n      }\n    ]\n  };\n\n  return <OrganizationChart datasource={ds} chartClass=\"myChart\" NodeTemplate={MyNode}/>;\n};\n\nexport default CustomNodeChart;\n","import React, { useRef, useState } from \"react\";\nimport OrganizationChart from \"../components/ChartContainer\";\nimport \"./export-chart.css\";\n\nconst ExportChart = () => {\n  const orgchart = useRef();\n  const ds = {\n    id: \"n1\",\n    name: \"Lao Lao\",\n    title: \"general manager\",\n    children: [\n      { id: \"n2\", name: \"Bo Miao\", title: \"department manager\" },\n      {\n        id: \"n3\",\n        name: \"Su Miao\",\n        title: \"department manager\",\n        children: [\n          { id: \"n4\", name: \"Tie Hua\", title: \"senior engineer\" },\n          {\n            id: \"n5\",\n            name: \"Hei Hei\",\n            title: \"senior engineer\",\n            children: [\n              { id: \"n6\", name: \"Dan Dan\", title: \"engineer\" },\n              { id: \"n7\", name: \"Xiang Xiang\", title: \"engineer\" }\n            ]\n          },\n          { id: \"n8\", name: \"Pang Pang\", title: \"senior engineer\" }\n        ]\n      },\n      { id: \"n9\", name: \"Hong Miao\", title: \"department manager\" },\n      {\n        id: \"n10\",\n        name: \"Chun Miao\",\n        title: \"department manager\",\n        children: [{ id: \"n11\", name: \"Yue Yue\", title: \"senior engineer\" }]\n      }\n    ]\n  };\n\n  const exportTo = () => {\n    orgchart.current.exportTo(\"Exported Custom\", fileextension, { pdfDriver: 'jspdf'});\n  };\n\n  const [filename, setFilename] = useState(\"organization_chart\");\n  const [fileextension, setFileextension] = useState(\"application/pdf\");\n\n  const onNameChange = event => {\n    setFilename(event.target.value);\n  };\n\n  const onExtensionChange = event => {\n    setFileextension(event.target.value);\n  };\n\n  return (\n    <>\n      <section className=\"toolbar\">\n        <label htmlFor=\"txt-filename\">Filename:</label>\n        <input\n          id=\"txt-filename\"\n          type=\"text\"\n          value={filename}\n          onChange={onNameChange}\n          style={{ fontSize: \"1rem\", marginRight: \"2rem\" }}\n        />\n        <span>Fileextension: </span>\n        <input\n          id=\"rd-png\"\n          type=\"radio\"\n          value=\"png\"\n          checked={fileextension === \"png\"}\n          onChange={onExtensionChange}\n        />\n        <label htmlFor=\"rd-png\">png</label>\n        <input\n          style={{ marginLeft: \"1rem\" }}\n          id=\"rd-pdf\"\n          type=\"radio\"\n          value=\"pdf\"\n          checked={fileextension === \"application/pdf\"}\n          onChange={onExtensionChange}\n        />\n        <label htmlFor=\"rd-pdf\">pdf</label>\n        <button\n          onClick={exportTo}\n          style={{ marginLeft: \"2rem\" }}\n        >\n          Export\n        </button>\n      </section>\n      <OrganizationChart ref={orgchart} datasource={ds} defaultZoom={3} />\n    </>\n  );\n};\n\nexport default ExportChart;\n","import React from \"react\";\nimport OrganizationChart from \"../components/ChartContainer\";\n\nconst DragDropChart = () => {\n  const ds = {\n    id: \"n1\",\n    name: \"Lao Lao\",\n    title: \"general manager\",\n    children: [\n      { id: \"n2\", name: \"Bo Miao\", title: \"department manager\" },\n      {\n        id: \"n3\",\n        name: \"Su Miao\",\n        title: \"department manager\",\n        children: [\n          { id: \"n4\", name: \"Tie Hua\", title: \"senior engineer\" },\n          {\n            id: \"n5\",\n            name: \"Hei Hei\",\n            title: \"senior engineer\",\n            children: [\n              { id: \"n6\", name: \"Dan Dan\", title: \"engineer\" },\n              { id: \"n7\", name: \"Xiang Xiang\", title: \"engineer\" }\n            ]\n          },\n          { id: \"n8\", name: \"Pang Pang\", title: \"senior engineer\" }\n        ]\n      },\n      { id: \"n9\", name: \"Hong Miao\", title: \"department manager\" },\n      {\n        id: \"n10\",\n        name: \"Chun Miao\",\n        title: \"department manager\",\n        children: [{ id: \"n11\", name: \"Yue Yue\", title: \"senior engineer\" }]\n      }\n    ]\n  };\n\n  return <OrganizationChart datasource={ds} draggable={true} />;\n};\n\nexport default DragDropChart;\n","import React, { useRef, useState } from \"react\";\nimport JSONDigger from \"json-digger\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport OrganizationChart from \"../components/ChartContainer\";\nimport \"./edit-chart.css\";\n\nconst EditChart = () => {\n  const orgchart = useRef();\n  const datasource = {\n    id: \"n1\",\n    name: \"Lao Lao\",\n    title: \"general manager\",\n    children: [\n      { id: \"n2\", name: \"Bo Miao\", title: \"department manager\" },\n      {\n        id: \"n3\",\n        name: \"Su Miao\",\n        title: \"department manager\",\n        children: [\n          { id: \"n4\", name: \"Tie Hua\", title: \"senior engineer\" },\n          {\n            id: \"n5\",\n            name: \"Hei Hei\",\n            title: \"senior engineer\",\n            children: [\n              { id: \"n6\", name: \"Dan Dan\", title: \"engineer\" },\n              { id: \"n7\", name: \"Xiang Xiang\", title: \"engineer\" }\n            ]\n          },\n          { id: \"n8\", name: \"Pang Pang\", title: \"senior engineer\" }\n        ]\n      },\n      { id: \"n9\", name: \"Hong Miao\", title: \"department manager\" },\n      {\n        id: \"n10\",\n        name: \"Chun Miao\",\n        title: \"department manager\",\n        children: [{ id: \"n11\", name: \"Yue Yue\", title: \"senior engineer\" }]\n      }\n    ]\n  };\n  const [ds, setDS] = useState(datasource);\n  const dsDigger = new JSONDigger(ds, \"id\", \"children\");\n\n  const [selectedNodes, setSelectedNodes] = useState(new Set());\n  const [newNodes, setNewNodes] = useState([{ name: \"\", title: \"\" }]);\n  const [isEditMode, setIsEditMode] = useState(true);\n  const [isMultipleSelect, setIsMultipleSelect] = useState(false);\n\n  const readSelectedNode = nodeData => {\n    if (isMultipleSelect) {\n      setSelectedNodes(prev => new Set(prev.add(nodeData)));\n    } else {\n      setSelectedNodes(new Set([nodeData]));\n    }\n  };\n\n  const clearSelectedNode = () => {\n    setSelectedNodes(new Set());\n  };\n\n  const onNameChange = (e, index) => {\n    newNodes[index].name = e.target.value;\n    setNewNodes([...newNodes]);\n  };\n\n  const onTitleChange = (e, index) => {\n    newNodes[index].title = e.target.value;\n    setNewNodes([...newNodes]);\n  };\n\n  const addNewNode = () => {\n    setNewNodes(prevNewNodes => [...prevNewNodes, { name: \"\", title: \"\" }]);\n  };\n\n  const removeNewNode = index => {\n    setNewNodes(prevNewNodes => {\n      prevNewNodes.splice(index, 1);\n      return [...prevNewNodes];\n    });\n  };\n\n  const getNewNodes = () => {\n    const nodes = [];\n    for (const node of newNodes) {\n      nodes.push({ ...node, id: uuidv4() });\n    }\n    return nodes;\n  };\n\n  const addChildNodes = async () => {\n    await dsDigger.addChildren([...selectedNodes][0].id, getNewNodes());\n    setDS({ ...dsDigger.ds });\n  };\n\n  const addSiblingNodes = async () => {\n    await dsDigger.addSiblings([...selectedNodes][0].id, getNewNodes());\n    setDS({ ...dsDigger.ds });\n  };\n\n  const addRootNode = () => {\n    dsDigger.addRoot(getNewNodes()[0]);\n    setDS({ ...dsDigger.ds });\n  };\n\n  const remove = async () => {\n    await dsDigger.removeNodes([...selectedNodes].map(node => node.id));\n    setDS({ ...dsDigger.ds });\n    setSelectedNodes(new Set());\n  };\n\n  const onMultipleSelectChange = e => {\n    setIsMultipleSelect(e.target.checked);\n  };\n\n  const onModeChange = e => {\n    setIsEditMode(e.target.checked);\n    if (e.target.checked) {\n      orgchart.current.expandAllNodes();\n    }\n  };\n\n  return (\n    <div className=\"edit-chart-wrapper\">\n      <section className=\"toolbar\">\n        <div className=\"selected-nodes\">\n          <div>\n            <h4 style={{ display: \"inline-block\" }}>Selected Node</h4>\n            <input\n              style={{ marginLeft: \"1rem\" }}\n              id=\"cb-multiple-select\"\n              type=\"checkbox\"\n              checked={isMultipleSelect}\n              onChange={onMultipleSelectChange}\n            />\n            <label htmlFor=\"cb-multiple-select\">Multiple Select</label>\n          </div>\n          <ul>\n            {Array.from(selectedNodes).map(node => (\n              <li key={node.id}>\n                {node.name} - {node.title}\n              </li>\n            ))}\n          </ul>\n        </div>\n        <div className=\"new-nodes\">\n          <h4>New Nodes</h4>\n          <ul>\n            {newNodes &&\n              newNodes.map((node, index) => (\n                <li key={index}>\n                  <input\n                    type=\"text\"\n                    placeholder=\"name\"\n                    value={node.name}\n                    onChange={e => onNameChange(e, index)}\n                  />\n                  <input\n                    type=\"text\"\n                    placeholder=\"title\"\n                    value={node.title}\n                    onChange={e => onTitleChange(e, index)}\n                  />\n                  {newNodes.length === 1 || index === newNodes.length - 1 ? (\n                    <button disabled={!isEditMode} onClick={addNewNode}>\n                      +\n                    </button>\n                  ) : (\n                    <button\n                      disabled={!isEditMode}\n                      onClick={() => removeNewNode(index)}\n                    >\n                      -\n                    </button>\n                  )}\n                </li>\n              ))}\n          </ul>\n        </div>\n        <div className=\"action-buttons\">\n          <button disabled={!isEditMode} onClick={addChildNodes}>\n            Add Child Nodes\n          </button>\n          <button disabled={!isEditMode} onClick={addSiblingNodes}>\n            Add Sibling Nodes\n          </button>\n          <button disabled={!isEditMode} onClick={addRootNode}>\n            Add Root Node\n          </button>\n          <button disabled={!isEditMode} onClick={remove}>\n            Remove Nodes\n          </button>\n          <input\n            style={{ marginLeft: \"1rem\" }}\n            id=\"cb-mode\"\n            type=\"checkbox\"\n            checked={isEditMode}\n            onChange={onModeChange}\n          />\n          <label htmlFor=\"cb-mode\">Edit Mode</label>\n        </div>\n      </section>\n      <OrganizationChart\n        ref={orgchart}\n        datasource={ds}\n        collapsible={!isEditMode}\n        multipleSelect={isMultipleSelect}\n        onClickNode={readSelectedNode}\n        onClickChart={clearSelectedNode}\n      />\n    </div>\n  );\n};\n\nexport default EditChart;\n","import React, { useRef, useState } from \"react\";\nimport JSONDigger from \"json-digger\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport OrganizationChart from \"../components/ChartContainer\";\nimport \"./edit-node.css\";\n\nconst EditNode = () => {\n  const orgchart = useRef();\n  const datasource = {\n    id: \"n1\",\n    name: \"Lao Lao\",\n    title: \"general manager\",\n    children: [\n      { id: \"n2\", name: \"Bo Miao\", title: \"department manager\" },\n      {\n        id: \"n3\",\n        name: \"Su Miao\",\n        title: \"department manager\",\n        children: [\n          { id: \"n4\", name: \"Tie Hua\", title: \"senior engineer\" },\n          {\n            id: \"n5\",\n            name: \"Hei Hei\",\n            title: \"senior engineer\",\n            children: [\n              { id: \"n6\", name: \"Dan Dan\", title: \"engineer\" },\n              { id: \"n7\", name: \"Xiang Xiang\", title: \"engineer\" }\n            ]\n          },\n          { id: \"n8\", name: \"Pang Pang\", title: \"senior engineer\" }\n        ]\n      },\n      { id: \"n9\", name: \"Hong Miao\", title: \"department manager\" },\n      {\n        id: \"n10\",\n        name: \"Chun Miao\",\n        title: \"department manager\",\n        children: [{ id: \"n11\", name: \"Yue Yue\", title: \"senior engineer\" }]\n      }\n    ]\n  };\n  const [ds, setDS] = useState(datasource);\n  const dsDigger = new JSONDigger(ds, \"id\", \"children\");\n\n  const [selectedNodes, setSelectedNodes] = useState(new Set());\n  const [newNodeName, setNewNodeName] = useState(\"\");\n  const [newNodeTitle, setNewNodeTitle] = useState(\"\");\n  const [isEditMode, setIsEditMode] = useState(true);\n  const [isMultipleSelect, setIsMultipleSelect] = useState(false);\n\n  const readSelectedNode = nodeData => {\n    if (isMultipleSelect) {\n      setSelectedNodes(prev => new Set(prev.add(nodeData)));\n    } else {\n      setSelectedNodes(new Set([nodeData]));\n    }\n  };\n\n  const clearSelectedNode = () => {\n    setSelectedNodes(new Set());\n  };\n\n  const onNameChange = e => {\n    setNewNodeName(e.target.value);\n  };\n\n  const onTitleChange = e => {\n    setNewNodeTitle(e.target.value);\n  };\n\n  const updateNodes = async () => {\n    await dsDigger.updateNodes([...selectedNodes].map(node => node.id), { id: uuidv4(), name: newNodeName, title: newNodeTitle });\n    setDS({ ...dsDigger.ds });\n  };\n\n  const onMultipleSelectChange = e => {\n    setIsMultipleSelect(e.target.checked);\n  };\n\n  const onModeChange = e => {\n    setIsEditMode(e.target.checked);\n    if (e.target.checked) {\n      orgchart.current.expandAllNodes();\n    }\n  };\n\n  return (\n    <div className=\"edit-chart-wrapper\">\n      <section className=\"toolbar\">\n        <div className=\"selected-nodes\">\n          <div>\n            <h4 style={{ display: \"inline-block\" }}>Selected Node</h4>\n            <input\n              style={{ marginLeft: \"1rem\" }}\n              id=\"cb-multiple-select\"\n              type=\"checkbox\"\n              checked={isMultipleSelect}\n              onChange={onMultipleSelectChange}\n            />\n            <label htmlFor=\"cb-multiple-select\">Multiple Select</label>\n          </div>\n          <ul>\n            {Array.from(selectedNodes).map(node => (\n              <li key={node.id}>\n                {node.name} - {node.title}\n              </li>\n            ))}\n          </ul>\n        </div>\n        <div className=\"new-nodes\">\n          <h4>New Node</h4>\n\n                  <input\n                    type=\"text\"\n                    placeholder=\"name\"\n                    value={newNodeName}\n                    onChange={onNameChange}\n                  />\n                  <input\n                    type=\"text\"\n                    placeholder=\"title\"\n                    value={newNodeTitle}\n                    onChange={onTitleChange}\n                  />\n  \n        </div>\n        <div className=\"action-buttons\">\n          <button disabled={!isEditMode} onClick={updateNodes}>\n            Update Nodes\n          </button>\n          <input\n            style={{ marginLeft: \"1rem\" }}\n            id=\"cb-mode\"\n            type=\"checkbox\"\n            checked={isEditMode}\n            onChange={onModeChange}\n          />\n          <label htmlFor=\"cb-mode\">Edit Mode</label>\n        </div>\n      </section>\n      <OrganizationChart\n        ref={orgchart}\n        datasource={ds}\n        collapsible={!isEditMode}\n        multipleSelect={isMultipleSelect}\n        onClickNode={readSelectedNode}\n        onClickChart={clearSelectedNode}\n      />\n    </div>\n  );\n};\n\nexport default EditNode;\n","import React from \"react\";\nimport { BrowserRouter as Router, Route, NavLink } from \"react-router-dom\";\nimport Home from \"./home/home\";\nimport DefaultChart from \"./default-chart/default-chart\";\nimport PanZoomChart from \"./pan-zoom-chart/pan-zoom-chart\";\nimport CustomNodeChart from \"./custom-node-chart/custom-node-chart\";\nimport ExportChart from \"./export-chart/export-chart\";\nimport DragDropChart from \"./drag-drop-chart/drag-drop-chart\";\nimport EditChart from \"./edit-chart/edit-chart\";\nimport EditNode from \"./edit-node/edit-node\";\nimport \"./App.css\";\n\nconst App = () => {\n  return (\n    <Router>\n      <div className=\"wrapper\">\n        <nav>\n          <NavLink to=\"/\" exact activeClassName=\"selected\">Home</NavLink>\n          <NavLink to=\"/default-chart\" activeClassName=\"selected\">Deault Chart</NavLink>\n          <NavLink to=\"/pan-zoom-chart\" activeClassName=\"selected\">Pan & Zoom Chart</NavLink>\n          <NavLink to=\"/custom-node-chart\" activeClassName=\"selected\">Custom Node Chart</NavLink>\n          <NavLink to=\"/export-chart\" activeClassName=\"selected\">Export Chart</NavLink>\n          <NavLink to=\"/drag-drop-chart\" activeClassName=\"selected\">Drap & Drop Chart</NavLink>\n          <NavLink to=\"/edit-chart\" activeClassName=\"selected\">Edit Chart</NavLink>\n          <NavLink to=\"/edit-node\" activeClassName=\"selected\">Edit Node</NavLink>\n        </nav>\n\n        <Route exact path=\"/\" component={Home} />\n        <Route path=\"/default-chart\" component={DefaultChart} />\n        <Route path=\"/pan-zoom-chart\" component={PanZoomChart} />\n        <Route path=\"/custom-node-chart\" component={CustomNodeChart} />\n        <Route path=\"/export-chart\" component={ExportChart} />\n        <Route path=\"/drag-drop-chart\" component={DragDropChart} />\n        <Route path=\"/edit-chart\" component={EditChart} />\n        <Route path=\"/edit-node\" component={EditNode} />\n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}